<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>轮播图</title>
	<link rel="stylesheet" href="style/reset.css">
	<style>
		#slider {
			margin: 0 auto;
			overflow: hidden;
		}
		#slider ul {
			position: relative;
		}
		#slider ul li {
			position: absolute;
			float: left;
			width: 100%;
			height: 100%;
		}
		#slider ul li img {
			width: 100%;
			height: 100%;
		}
	</style>
	<script>
		window.onload = function(){
			let width = 600;
			let height = 300;
			let slider_time = 5000;
			let x = 100;
			let slider = document.getElementById('slider');
			let slider_list = slider.getElementsByTagName('ul')[0];
			let slider_li = slider_list.getElementsByTagName('li');
			slider.style.width = width+'px';
			slider_list.style.width = width+'px';
			slider_list.style.height = height+'px';
			for(var value of slider_li) {
				value.style.width = width+'px';
				value.style.left = -x+'%';
			}
			slider_li[0].style.left = '0%';
			let count = 3;
			setTimeout(timeout,slider_time);
			function timeout(){
				count++;
				let left = 0;
				console.log("轮播开始");
				setTimeout(b,1);
				function b() {
					slider_li[(count+1)%4].style.left = x+'%';
					left = left+1;
					slider_li[count%4].style.left = -left+'%';
					slider_li[(count+1)%4].style.left = (x-left)+'%';
					if(left === 100){
						clearTimeout(b);
						console.log("轮播结束");
						return false;
					}
					clearTimeout(b);
					setTimeout(b,1);
				}
				clearTimeout(timeout);
				setTimeout(timeout,slider_time);
			}
			// setInterval(function(){
			// 	count++;
			// 	let left = 0;
			// 	// let a = setInterval(
			// 	// 	function(){
			// 	// 		left = left+1;
			// 	// 		slider_li[count%4].style.left = left+'%';
			// 	// 		slider_li[(count+1)%4].style.left = (left-x)+'%';
			// 	// 		if(left === 100){
			// 	// 			slider_li[(count)%4].style.left = -x+'%';
			// 	// 			clearInterval(a);
			// 	// 		}
			// 	// 	},5);
				// setTimeout(b,5);
				// function b() {
				// 	slider_li[(count+1)%4].style.left = x+'%';
				// 	left = left+1;
				// 	slider_li[count%4].style.left = -left+'%';
				// 	slider_li[(count+1)%4].style.left = (x-left)+'%';
				// 	if(left === 100){
				// 		clearTimeout(b);
				// 	}
				// 	setTimeout(b,5);
				// }
			// 	// let b = setInterval(
			// 	// 	function(){
			// 	// 		slider_li[(count+1)%4].style.left = x+'%';
			// 	// 		left = left+1;
			// 	// 		slider_li[count%4].style.left = -left+'%';
			// 	// 		slider_li[(count+1)%4].style.left = (x-left)+'%';
			// 	// 		if(left === 100){
			// 	// 			clearInterval(b);
			// 	// 		}
			// 	// 	},5);
			// },slider_time);
		}
	</script>
</head>
<body>
	<div id="slider">
		<ul>
			<li><img src="img/1.jpg" alt=""></li>
			<li><img src="img/2.jpg" alt=""></li>
			<li><img src="img/3.jpg" alt=""></li>
			<li><img src="img/4.jpg" alt=""></li>
		</ul>
	</div>
</body>
</html>